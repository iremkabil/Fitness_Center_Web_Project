@model Fitness_Center_Web_Project.Models.Randevu

@{
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}

<div class="container" style="padding: 20px;">
    <h2 class="text-center" style="margin-bottom: 30px;">Randevu Özeti</h2>

    <p><strong>Ad:</strong> @Model.User.Ad</p>
    <p><strong>Soyad:</strong> @Model.User.Soyad</p>
    <p><strong>Telefon:</strong> @Model.User.Telefon</p>

    <p><strong>Seçilen Hizmet/Seans:</strong> @Model.Islem.Ad</p>
    <p><strong>Seçilen Antrenör:</strong> @Model.Personel.Ad @Model.Personel.Soyad</p>

    <p><strong>Randevu Günü:</strong> @Model.RandevuTarihi.ToShortDateString()</p>
    <p><strong>Randevu Saati:</strong> @Model.RandevuSaati</p>

    <p><strong>Süre:</strong> @Model.Sure</p>
    <p><strong>Ücret:</strong> @Model.Ucret</p>

    <form asp-controller="Randevu" asp-action="RandevuOnaylaPost" method="post" style="text-align:center; margin-top:20px;">
        @Html.AntiForgeryToken()

        <!-- Güvenli parametreler: sadece seçim bilgisi -->
        <input type="hidden" name="islemId" value="@Model.IslemId" />
        <input type="hidden" name="personelId" value="@Model.PersonelId" />
        <input type="hidden" name="randevuTarihi" value="@Model.RandevuTarihi.ToString("yyyy-MM-dd")" />
        <input type="hidden" name="randevuSaati" value="@Model.RandevuSaati" />

        <button type="submit" class="btn btn-success" style="margin-right:10px;">Randevuyu Onayla</button>

        <a asp-controller="Randevu"
           asp-action="TarihSaatSec"
           asp-route-islemId="@Model.IslemId"
           asp-route-personelId="@Model.PersonelId"
           class="btn btn-warning"
           style="margin-right:10px;">Geri Dön</a>

        <a asp-controller="User" asp-action="UserDashboard" class="btn btn-danger">İptal Et</a>
    </form>
</div>

@*
    @Html.AntiForgeryToken() eklendi (controller [ValidateAntiForgeryToken] ile uyumlu)
    Hidden alanlardan UserId/Ucret/Sure kaldırıldı (manipülasyon engeli)
    POST için parametre isimleri islemId/personelId/randevuTarihi/randevuSaati yapıldı 
    (controller ile birebir uyumlu)
*@